# n8n Monitoring Service Environment Template
# This template contains environment variables for the n8n monitoring service

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
N8N_MONITORING_PORT={{ n8n_monitoring_port | default('8008') }}
N8N_MONITORING_HOST={{ n8n_monitoring_host | default('0.0.0.0') }}
N8N_MONITORING_DASHBOARD_PORT={{ n8n_monitoring_dashboard_port | default('3003') }}

# =============================================================================
# n8n INTEGRATION
# =============================================================================
N8N_URL={{ n8n_url | default('http://n8n:5678') }}
N8N_API_KEY={{ vault_n8n_api_key | default('') }}
N8N_WEBHOOK_URL={{ n8n_webhook_url | default('http://n8n-monitoring:8008/webhooks/n8n') }}

# =============================================================================
# AI AGENTS INTEGRATION
# =============================================================================
AI_AGENTS_URL={{ ai_agents_url | default('http://ai-agents:8003') }}

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Uses core database configuration from core.env.j2
POSTGRES_HOST={{ postgres_host | default('postgres') }}
POSTGRES_PORT={{ postgres_port | default('5432') }}
POSTGRES_DB={{ postgres_db | default('multimodal') }}
POSTGRES_USER={{ postgres_user | default('postgres') }}
POSTGRES_PASSWORD={{ vault_postgres_password | default('changeme_in_production') }}

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST={{ redis_host | default('redis') }}
REDIS_PORT={{ redis_port | default('6379') }}
REDIS_DB={{ redis_db_n8n_monitoring | default('7') }}

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
MONITORING_INTERVAL={{ monitoring_interval | default('30') }}
METRICS_RETENTION_DAYS={{ metrics_retention_days | default('90') }}
MAX_EXECUTION_HISTORY={{ max_execution_history | default('1000') }}

# =============================================================================
# ALERT CONFIGURATION
# =============================================================================
ALERT_EMAIL_ENABLED={{ alert_email_enabled | default('true') }}
ALERT_SLACK_ENABLED={{ alert_slack_enabled | default('true') }}
ALERT_WEBHOOK_ENABLED={{ alert_webhook_enabled | default('false') }}

# Alert Thresholds
ALERT_THRESHOLD_ERROR_RATE={{ alert_threshold_error_rate | default('5.0') }}
ALERT_THRESHOLD_RESPONSE_TIME={{ alert_threshold_response_time | default('30000') }}
ALERT_THRESHOLD_FAILURE_COUNT={{ alert_threshold_failure_count | default('5') }}

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
SMTP_HOST={{ smtp_host | default('') }}
SMTP_PORT={{ smtp_port | default('587') }}
SMTP_USER={{ smtp_user | default('') }}
SMTP_PASSWORD={{ vault_smtp_password | default('') }}
SMTP_FROM_EMAIL={{ smtp_from_email | default('') }}

# =============================================================================
# SLACK CONFIGURATION
# =============================================================================
SLACK_WEBHOOK_URL={{ vault_slack_webhook_url | default('') }}
SLACK_CHANNEL={{ slack_channel | default('#n8n-monitoring') }}

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WS_MAX_CONNECTIONS={{ ws_max_connections | default('100') }}
WS_HEARTBEAT_INTERVAL={{ ws_heartbeat_interval | default('30') }}

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
MAX_CONCURRENT_MONITORS={{ max_concurrent_monitors | default('10') }}
REQUEST_TIMEOUT={{ request_timeout | default('30') }}

# =============================================================================
# SECURITY
# =============================================================================
SECRET_KEY={{ vault_n8n_monitoring_secret_key | default('changeme_in_production') }}
ALLOWED_ORIGINS={{ allowed_origins | default('*') }}

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL={{ log_level | default('INFO') }}